FROM eclipse-temurin:21-jdk
WORKDIR app
COPY app ./

RUN ./gradlew --no-daemon shadowJar

ENV PORT=${PORT}
ENV JDBC_DATABASE_URL=${JDBC_DATABASE_URL}
ENV JDBC_DATABASE_USERNAME=${JDBC_DATABASE_USERNAME}
ENV JDBC_DATABASE_PASSWORD=${JDBC_DATABASE_PASSWORD}

CMD java -jar build/libs/app.jar
